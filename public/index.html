<title>Battlecards</title>

<body>
  <div id="opponent"></div>
  <div id="gameStatus"></div>
  <div id="me"></div>
</body>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
  var myPlayerId;
  var socket = io();

  socket.on('waitingForAnotherPlayer', function() {
    console.log('waitingForAnotherPlayer');
    $('#gameStatus').html('waiting for another player...');
  });
  socket.on('gameStarted', function(response) {
    console.log('gameStarted', response);
    myPlayerId = response.playerId;
    $('#gameStatus').html(
      'Game started. Curent turn: ' + (response.playersTurn === myPlayerId ? 'Me' : 'Other player')
    );
    if (response.playersTurn === myPlayerId) {
      $('#gameStatus').append('<button onclick="endTurn()">End turn</button>');
    }
    $('#opponent').html('Opponent\'s deck: ' + response.opponentsDeckSize);
    $('#me').html('My deck: ' + response.myDeckSize)
  });
  socket.on('invalidMove', function(message) {
    console.warn('Invalid move:', message);
  });

  function endTurn() {
    socket.emit('endTurn');
  }
  socket.on('turnEnded', function(response) {
    console.log('turnEnded', response);
    $('#gameStatus').html(
      'Game started. Curent turn: ' + (response.playersTurn === myPlayerId ? 'Me' : 'Other player')
    );
    if (response.playersTurn === myPlayerId) {
      $('#gameStatus').append('<button onclick="endTurn()">End turn</button>');
    }
  });
</script>
